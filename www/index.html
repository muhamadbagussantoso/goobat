<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
    <!-- <link rel="stylesheet" type="text/css" href="css/index.css" /> -->
    <title>Go-Obat</title>
</head>

<body>
	<!-- <div class="app"> -->
        <!-- <h1>Go-Obat</h1> -->
        <!-- <div id="deviceready" class="blink"> -->
            <!-- <p class="event listening">Connecting to Device</p> -->
            <!-- <p class="event received">Device is Ready</p> -->
        <!-- </div> -->
    <!-- </div> -->
<table border = 1>
  <tr>
  <td>ID Kategori</td>
	<td> ID Produk</td>
	
  </tr>
	
  <tr>
	<td id="categories">
		
	</td>
	<td id="Detailproductsname">
		
	</td>
	
  </tr>
</table>

</body>

</html>
<link src="ini.php"></link>

<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
<script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>

<script type="text/javascript">
    app.initialize();
	
	

	var url = 'http://ARMMR8JEW5FLK7AS63FLHUU72I29QDXP@go-obat.com/markets/api/products?output_format=JSON';
	var key = "ARMMR8JEW5FLK7AS63FLHUU72I29QDXP";
	var password = "";
	
	$.ajaxSetup({
		cache: true ,
		beforeSend: function(xhr) {
		   xhr.setRequestHeader('Authorization', ("Basic "
                        .concat(btoa(key))));
                    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
			console.log(xhr);
			<!-- xhr.setRequestHeader('Authorization', '...'); -->
		},
	});
	
	$.getJSON(url, 
		function(datas){
		var products = datas['products'];
		var html='';
			for(i = 0; i < products.length; i++) {
				var idProduct = products[""+i+""]["id"];
				
				var setUrlProducts = "http://go-obat.com/markets/api/products/"+idProduct+"?output_format=JSON";
				$.getJSON(setUrlProducts, 
					function(setUrlProduct){
					var Detailproductsname ='';
					var Detailproductsnamecategori ='';
					var apiIdProduct = setUrlProduct["product"]["id"];
					var apiIdImage = setUrlProduct["product"]["associations"]["images"][0]["id"];
					var setUrlImageProduts = "http://ARMMR8JEW5FLK7AS63FLHUU72I29QDXP@go-obat.com/markets/api/images/products/"+apiIdProduct+"/"+apiIdImage+"";
					console.log(setUrlImageProduts);
					 Detailproductsname += '<tr id="" /><td><img src="'+setUrlImageProduts+'"></td><td>ID '+ setUrlProduct["product"]["id"] +' nama produk '+ setUrlProduct["product"]["name"] +' id kategori = '+ setUrlProduct["product"]["associations"]["categories"][0]["id"]+' id gambar= '+ setUrlProduct["product"]["associations"]["images"][0]["id"]+'</td></tr>';
					 Detailproductsnamecategori += ' id kategori = '+ setUrlProduct["product"]["associations"]["categories"][0]["id"]+'';
					
					$('#Detailproductsname').append(Detailproductsname);
					<!-- $('#categories').append(Detailproductsnamecategori); -->
				});
				html += '<div id="div'+ products[""+i+""]["id"] +'" />'+ products[""+i+""]["id"] +'</div>';	
			}
		//$('#products').append(html);

		$.ajaxSetup({ cache: true });
	});

</script>